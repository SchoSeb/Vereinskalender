<!DOCTYPE html>
<html lang='en'>
    <head>
        <meta charset='utf-8' />
        <link rel="stylesheet" href="styles.css">
        <script src="https://unpkg.com/ical.js/dist/ical.es5.min.cjs"></script>
        <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.20/index.global.min.js'></script>
        <script src='https://cdn.jsdelivr.net/npm/@fullcalendar/icalendar@6.1.20/index.global.min.js'></script>
        <script src='https://unpkg.com/popper.js/dist/umd/popper.min.js'></script>
        <script src='https://unpkg.com/tooltip.js/dist/umd/tooltip.min.js'></script>
    
        <script>

            document.addEventListener('DOMContentLoaded', function() {


                var calendarEl = document.getElementById('calendar');
                
                var calendar = new FullCalendar.Calendar(calendarEl, {
                    
                    firstDay: 1,
                    initialView: 'dayGridYear',
                    //initialView: 'multiMonthYear',
                    //multiMonthMaxColumns: 1,
                    displayEventTime: false,
                    eventDisplay: 'block',
                    height: 'auto',
                    
                    eventSources: [
                        /*
                        {
                            events: [ 
                                {
                                    title : 'Aerobic',
                                    groupId: 'sport', // recurrent events in this group move together
                                    daysOfWeek: [ '2' ],
                                    startRecur: '2026-03-03',
                                    endRecur: '2026-05-30',
                                    startTime: '18:00:00'
                                }
                            ],
                            color: "magenta"
                        },
                        {
                            events: [ 
                                {
                                    title : 'Training',
                                    groupId: 'training', // recurrent events in this group move together
                                    daysOfWeek: [ '1' ],
                                    startRecur: '2026-01-18',
                                    endRecur: '2026-05-30',
                                    startTime: '19:30:00'
                                }
                            ],
                            color: "lightblue"
                            
                        },
                        */
                        
                       {
                            // Hallenbelegung
                            url: './calendardata/TV_Hallenplan.ics',
                            format: "ics",
                            color: "orange",
                            displayEventTime: false
                        },

                       {
                            // Veranstaltungskalender
                            url: './calendardata/Veranstaltungskalender_2026.ics',
                            format: "ics",
                            color: "grey",
                            displayEventTime: false
                        },

                        {
                            // Herren 1
                            //url: 'https://www.mytischtennis.de/community/exportICSCalendar?teamIds=2947346',
                            url: './calendardata/Herren_1.ics',
                            format: "ics",
                            color: "#005200",
                            displayEventTime: false
                        },
                        {
                            // Herren 2
                            //url: 'https://www.mytischtennis.de/community/exportICSCalendar?teamIds=2950752',
                            url: './calendardata/Herren_2.ics',
                            format: "ics",
                            color: "#009000",
                            displayEventTime: false
                        },
                        {
                            // Damen 1
                            //url: 'https://www.mytischtennis.de/community/exportICSCalendar?teamIds=2947440',
                            url: './calendardata/Damen_1.ics',
                            format: "ics",
                            color: "purple",
                            displayEventTime: false
                        },
                        {
                            // Damen 2
                            //url: 'https://www.mytischtennis.de/community/exportICSCalendar?teamIds=2983898',
                            url: './calendardata/Damen_2.ics',
                            format: "ics",
                            color: "darkorchid",
                            displayEventTime: false
                        },
                        {
                            // Jungen Vorrunde
                            //url: 'https://www.mytischtennis.de/community/exportICSCalendar?teamIds=2952812',
                            url: './calendardata/Jungen_Vor.ics',
                            format: "ics",
                            color: "lightblue",
                            displayEventTime: false
                        },
                        {
                            // Jungen RÃ¼ckrunde
                            //url: 'https://www.mytischtennis.de/community/exportICSCalendar?teamIds=3065766',
                            url: './calendardata/Jungen_Rueck.ics',
                            format: "ics",
                            color: "cadetblue",
                            displayEventTime: false
                        },
                        {
                            // Feiertage Bayern
                            //url: "https://ics.tools/Feiertage/bayern.ics", 
                            url: './calendardata/bayern.ics',
                            format: "ics",
                            color: "red"
                        }
                    ],

                    eventDidMount: function(info) {
                        var tooltip = new Tooltip(info.el, {
                            title: "Beginn: " + (info.event.start).toLocaleTimeString("de-DE", {
                                        hour: '2-digit',
                                        minute: '2-digit',
                                        hour12: false
                                    }) + 
                                    (info.event.extendedProps.location ? ("\n" + info.event.extendedProps.location):""),
                            placement: 'top',
                            trigger: 'hover',
                            container: 'body'
                        });
                        },

                    dayCellDidMount: function(arg) {
                        
                        // shade months
                        const monthIndex = arg.date.getMonth();
                        if (monthIndex % 2 === 1) {
                            arg.el.style.backgroundColor = '#eeeeee';
                        }

                    }

 
                });



                calendar.render();

            });


        </script>
    </head>
    <body>
        <div class="centered">
            <div id='calendar'></div>
        </div>        
    </body>
</html>